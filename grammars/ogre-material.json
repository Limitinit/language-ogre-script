{
    "fileTypes": [
        "material",
        "program"
    ],
    "name": "Ogre Material Script",
    "scopeName": "source.ogre.material",
    "patterns": [
        {
            "comment": "Top Level Tag Names",
            "begin": "\\b(hlms|material|technique|pass|clear|texture_unit|rtshader_system|(geometry|vertex|fragment|compute|tessellation_hull|tessellation_domain)_program(_ref)?|default_params|shared_params)\\b",
            "beginCaptures": {
                "1": {
                    "name": "entity.name.tag"
                }
            },
            "end": "($|//|{)",
            "patterns": [
                {
                    "match": "\\b(pbs|hlsl|glsl|glsles|cg|unified)\\b",
                    "name": "storage.type"
                }
            ]
        },
        {
            "comment": "Keywords followed by strings",
            "begin": "\\b(source|entry_point|scheme)\\b",
            "beginCaptures": {
                "1": {
                    "name": "entity.name.function"
                }
            },
            "end": "($|//)",
            "patterns": [
                {
                    "match": ".*",
                    "name": "string"
                }
            ]
        },
        {
            "comment": "Texture declaration",
            "begin": "\\b(texture)\\b",
            "beginCaptures": {
                "1": {
                    "name": "entity.name.function"
                }
            },
            "end": "($|//)",
            "patterns": [
                {
                    "match": "\\b(pooled|target_width|target_height|target_width_scaled|target_height_scaled|gamma|no_fsaa|depth_pool|local_scope|chain_scope|global_scope|1d|2d|3d|cubic|alpha)\\b",
                    "name": "constant.language"
                },
                {
                    "include": "#pixelformat"
                },
                {
                    "include": "#numeric"
                },
                {
                    "match": "\\S+",
                    "name": "string"
                }
            ]
        },
        {
            "match": "\\b(syntax|profiles|target)\\b",
            "name": "entity.name.function",
            "comment": "Program syntaxes. Could also detect the specific tokens here"
        },
        {
            "match": "\\b(compute_group_dimensions)\\b",
            "name": "entity.name.function",
            "comment": "general properties"
        },
        {
            "comment": "v2.1: Detail Blend Mode",
            "begin": "\\b(detail_blend_mode\\d)\\b",
            "beginCaptures": {
                "1": {
                    "name": "entity.name.function"
                }
            },
            "end": "($|//)",
            "patterns": [
                {
                    "match": "\\b(Overlay|Add|Multiply2x)\\b",
                    "name": "constant.language"
                }
            ]
        },
        {
            "comment": "other properties",
            "match": "\\b(detail_offset_scale\\d|lod_index|point_size|line_width|depth_bias|iteration_depth_bias|ambient|diffuse|specular|emissive|roughness|fresnel|first_render_queue|last_render_queue|visibility_mask|anim_texture|point_size_min|point_size_max|lod_bias|identifier|start_light|max_lights|colour_value|depth_value|stencil_value|ref_value|mask|tex_coord_set|tex_border_colour|max_anisotropy|mipmap_bias|scroll|scroll_anim|rotate|rotate_anim|scale|transform|preprocessor_defines|includes_pose_animation)\\b",
            "name": "entity.name.function"
        },
        {
            "comment": "rtshader properties",
            "match": "\\b(lighting_stage|light_count|triplanarTexturing|integrated_pssm4|layered_blend|source_modifier)\\b",
            "name": "entity.name.function"
        },
        {
            "comment": "v2.1 properties",
            "match": "\\b((detail|roughness|specular|normal|diffuse|detail_weight)_map|detail(_normal|_weight)?_map\\d)\\b",
            "name": "entity.name.function"
        },
        {
            "include": "source.ogre.script"
        }
    ],
    "repository": {
        "numeric": {
            "patterns": [
                {
                    "match": "\\b((0(x|X)[0-9a-fA-F]*)|(([0-9]+\\.?[0-9]*)|(\\.[0-9]+))((e|E)(\\+|-)?[0-9]+)?)(L|l|UL|ul|u|U|F|f|ll|LL|ull|ULL)?\\b",
                    "name": "constant.numeric.c"
                }
            ]
        },
        "pixelformat": {
            "patterns": [
                {
                    "match": "\\b(PF_L8|PF_L16|PF_A8|PF_A4L4|PF_BYTE_LA|PF_R5G6B5|PF_B5G6R5|PF_R3G3B2|PF_A4R4G4B4|PF_A1R5G5B5|PF_R8G8B8|PF_B8G8R8|PF_A8R8G8B8|PF_A8B8G8R8|PF_B8G8R8A8|PF_R8G8B8A8|PF_X8R8G8B8|PF_X8B8G8R8|PF_A2R10G10B10|PF_A2B10G10R10|PF_FLOAT16_R|PF_FLOAT16_RGB|PF_FLOAT16_RGBA|PF_FLOAT32_R|PF_FLOAT32_RGB|PF_FLOAT32_RGBA|PF_SHORT_RGBA|PF_FLOAT16_GR|PF_FLOAT32_GR|PF_DEPTH|PF_SHORT_GR|PF_SHORT_RGB|PF_PVRTC_RGB2|PF_PVRTC_RGBA2|PF_PVRTC_RGB4|PF_PVRTC_RGBA4|PF_R8|PF_RG8|PF_A8R8G8B8|PF_R8G8B8A8|PF_R8G8B8|PF_FLOAT16_RGBA|PF_FLOAT16_RGB|PF_FLOAT16_R|PF_FLOAT32_RGBA|PF_FLOAT32_RGB|PF_FLOAT32_R)\\b",
                    "name": "storage.type"
                }
            ]
        }
    }
}
